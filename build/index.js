(()=>{"use strict";var t=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e={};t(e);var n={};t(n);const s=Vue.component("cart-search",{props:["searchLine"],template:'\n    <input\n      v-bind:value="searchLine"\n      v-on:input="$emit(\'input\', $event.target.value)"\n      placeholder="Введите название товара"\n    >\n    '}),i=Vue.component("goods-item",{props:["item"],template:'\n      <div class="featuredItem">\n        <div class="featuredImgWrap">\n          <img v-bind:src="item.image" alt="">\n          <div class="featuredImgDark">\n            <button class="addToCart">\n              <img src="../images/cart.svg" alt="">\n                Add to Cart\n            </button>\n          </div>\n        </div>\n        <div class="featuredData">\n          <div class="featuredName">\n            {{ item.title }}\n          </div>\n          <div class="featuredPrice">\n            $ {{ item.price }}\n          </div>\n          <div class="featuredAddDelite">\n            <custom-button @click="addGood">Добавить товар</custom-button>\n            <custom-button @click="deleteGood">Удалить товар</custom-button>\n          </div>\n        </div>\n      </div>\n    ',methods:{addGood(){var t;t=this.item.id,fetch(`${URL}/${t}`,{method:"POST",headers:{"Content-Type":"application/json"}})},deleteGood(){var t;t=this.item.id,fetch(`${URL}/delete/${t}`,{method:"DELETE",headers:{"Content-Type":"application/json"}})}}}),o=Vue.component("basket",{props:["close"],data:function(){return{basketGoods:[]}},template:'\n      <div class="basket">\n        <div class="basketRow basketHeader">\n          <div>Название товара</div>\n          <div>Количество</div>\n          <div>Цена за шт.</div>\n          <div>Итого</div>\n        </div>\n\n        <basket-item v-for="item in basketGoods" v-bind:item="item" v-bind:key="item.id"></basket-item>\n\n        <div class="basketTotal">\n          Товаров в корзине на сумму:\n          $<span class="basketTotalValue">{{ totalSum }}</span>\n        </div>\n        <custom-button class="closeBasket" @click="$emit(\'close\')"><img src="../images/close-card.svg" alt="close"></custom-button>\n      </div>\n    ',mounted(){fetch(`${URL}/basketgoods`).then((t=>t.json())).then((t=>t)).then((t=>{this.basketGoods=t}))},computed:{totalSum:function(){let t=0;return this.basketGoods.forEach((e=>{t+=e.price*e.count})),t}}});Vue.component("basket-item",{props:["item"],template:'\n      <div class="basket-item">\n        <div class="featuredName">\n          {{ item.title }}\n        </div>\n        <div class="featuredCount">\n          {{ item.count }} шт.\n        </div>\n        <div class="featuredPrice">\n          $ {{ item.price }}\n        </div>\n        <div class="featuredTotal">\n          $ {{ item.count * item.price }}\n        </div>\n      </div>\n    '}),Vue.component("custom-button",{props:["click"],template:"\n      <button @click=\"$emit('click')\">\n        <slot></slot>\n      </button>\n    "}),onload=()=>{new Vue({el:"#app",components:{basket:o,"cart-search":s,"goods-item":i,"basket-item":e.BasketItem,"custom-button":n.CustomButton},data:{goods:"Нет данных",filteredGoods:[],searchLine:"",isVisibleCart:!1},mounted(){(function(t,e,n="GET"){return new Promise(((s,i)=>{fetch(`${t}${e}`,{method:n}).then((t=>t.json())).then((t=>{s(t)}))}))})("http://localhost:8000","/goods.json").then((t=>{this.goods=t,this.filteredGoods=t}))},methods:{filterGoods(){this.filteredGoods=this.goods.filter((({title:t})=>new RegExp(this.searchLine,"i").test(t)))},showBasket(){this.isVisibleCart=!0},closeBasket(){this.isVisibleCart=!1}}})}})();